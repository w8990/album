# 相册功能说明

## 功能概述

为现有的文件管理系统增加了完整的相册功能，用户可以创建自定义相册，并在上传文件时选择相册，实现文件的分类管理。

## 主要功能

### 1. 相册管理
- **创建相册**：用户可以创建自定义相册，设置相册名称和描述
- **编辑相册**：可以修改相册的名称和描述
- **删除相册**：可以删除相册（默认相册不可删除），删除时文件会自动移动到默认相册
- **相册展示**：以卡片形式展示所有相册，显示相册封面、文件数量、总大小等信息

### 2. 文件上传
- **选择相册**：上传文件时可以选择目标相册
- **默认相册**：未指定相册的文件会自动归入默认相册
- **批量上传**：支持批量上传文件到指定相册

### 3. 文件管理
- **按相册筛选**：可以按相册筛选显示文件
- **相册切换**：点击相册卡片可以查看该相册中的文件
- **批量移动**：支持批量选择文件并移动到其他相册
- **文件分类**：文件列表会显示所属相册信息

## 数据库变更

### 新增表
- `albums` 表：存储相册信息
  - `id`：相册ID（主键）
  - `name`：相册名称
  - `description`：相册描述
  - `cover_image_id`：封面图片ID
  - `created_at`：创建时间
  - `updated_at`：更新时间

### 修改表
- `files` 表：新增 `album_id` 字段
  - `album_id`：关联的相册ID，可为空

## API 接口

### 相册相关接口
- `POST /api/albums` - 创建相册
- `GET /api/albums` - 获取所有相册
- `GET /api/albums/:id` - 获取单个相册信息
- `GET /api/albums/:id/files` - 获取相册中的文件
- `PUT /api/albums/:id` - 更新相册信息
- `DELETE /api/albums/:id` - 删除相册

### 文件相关接口（修改）
- `POST /api/upload` - 文件上传（支持 album_id 参数）
- `PUT /api/files/:id/album` - 移动单个文件到相册
- `PUT /api/files/batch/album` - 批量移动文件到相册

## 前端功能

### 界面布局
1. **Hero区域**：显示系统统计信息，包括相册数量
2. **相册管理区域**：展示所有相册的卡片视图
3. **文件管理区域**：支持按相册筛选的文件列表

### 交互功能
1. **相册创建**：点击"创建相册"按钮打开创建对话框
2. **相册编辑**：通过相册卡片的下拉菜单进行编辑
3. **文件上传**：上传对话框中可选择目标相册
4. **批量操作**：选择多个文件后可批量移动到相册
5. **筛选查看**：点击相册卡片或使用筛选器查看特定相册的文件

## 使用说明

### 创建相册
1. 点击相册管理区域的"创建相册"按钮
2. 输入相册名称（必填）和描述（可选）
3. 点击"创建"按钮完成创建

### 上传文件到相册
1. 点击"快速上传"按钮打开上传对话框
2. 选择要上传的文件
3. 在"选择相册"下拉菜单中选择目标相册
4. 点击"开始上传"

### 管理文件分类
1. 进入批量操作模式
2. 选择要移动的文件
3. 点击"移动到相册"按钮
4. 在对话框中选择目标相册
5. 确认移动操作

### 查看相册文件
1. 点击相册卡片直接查看该相册的文件
2. 或使用文件管理区域的相册筛选器
3. 可以结合搜索和文件类型筛选功能

## 技术特点

- **响应式设计**：相册卡片采用网格布局，自适应不同屏幕尺寸
- **优雅动画**：卡片悬停效果和页面切换动画
- **数据一致性**：删除相册时自动处理文件归属，确保数据完整性
- **用户体验**：直观的拖拽上传和批量操作功能
- **性能优化**：相册封面自动选择最新图片，文件计数实时更新

## 默认相册

系统会自动创建一个"默认相册"，用于存放未分类的文件：
- 默认相册不可删除
- 上传时不选择相册的文件会进入默认相册
- 删除其他相册时，其中的文件会移动到默认相册 